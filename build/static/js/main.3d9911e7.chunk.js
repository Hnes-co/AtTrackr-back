(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{120:function(e,t,n){},146:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(36),i=n.n(c),r=(n(120),n(4)),l=(n(69),n(9)),o=n.n(l),d=n(18),u=n(14),j=n.p+"static/media/traveller-edited.6009f3b0.png",b=n(43),m=n.n(b),h="/api/users",O="/api/visits";function p(e){return v.apply(this,arguments)}function v(){return(v=Object(d.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post(h,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return x.apply(this,arguments)}function x(){return(x=Object(d.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/users?username="+t.username+"&passwordHash="+t.passwordHash,e.next=3,m.a.get(n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return N.apply(this,arguments)}function N(){return(N=Object(d.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.put(h,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return w.apply(this,arguments)}function w(){return(w=Object(d.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post(O,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return C.apply(this,arguments)}function C(){return(C=Object(d.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/visits/"+t._id,e.next=3,m.a.put(n,t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return P.apply(this,arguments)}function P(){return(P=Object(d.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/visits?userId="+t,e.next=3,m.a.get(n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){return U.apply(this,arguments)}function U(){return(U=Object(d.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/visits/"+t,e.next=3,m.a.delete(n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D=n(171),I=n(176),A=n(175),V=n(173),E=n(170),M=n(172),T=n(17),H=n(28),J=n(75),q=n.n(J),R=n(76),_=n.n(R),Y=n(74),K=n.n(Y),B=n(77),Z=n.n(B),F=n(93),z=n.n(F),G=n.p+"static/media/traveller.6d42be19.png",Q=n(0),W=function(e){var t=e.dropDownOpen,n=e.setDropDownOpen,s=e.handleLogout,c=e.buttonClassnames,i=Object(a.useState)("home-header"),l=Object(r.a)(i,2),o=l[0],d=l[1],u=Object(T.f)();function j(e){u.push(e)}return document.addEventListener("scroll",(function(){window.scrollY>70&&"home-header"===o&&d("home-header home-header-hide"),window.scrollY<70&&d("home-header")})),Object(Q.jsxs)("div",{className:o,children:[Object(Q.jsx)("div",{className:"header-nav header-nav-dropdown",children:Object(Q.jsxs)("div",{className:"dropdown dropdown-nav",onClick:function(){return n(!t)},children:[Object(Q.jsx)(z.a,{}),Object(Q.jsx)("div",{className:"dropdown-aligner",hidden:!t,children:Object(Q.jsxs)("div",{className:"dropdown-content dropdown-content-nav",children:[Object(Q.jsxs)("label",{onClick:function(){return j("/")},children:[Object(Q.jsx)(K.a,{}),Object(Q.jsx)("span",{children:"My Profile"})]}),Object(Q.jsxs)("label",{onClick:function(){return j("/AddLocation")},children:[Object(Q.jsx)(q.a,{}),Object(Q.jsx)("span",{children:"Add new Place"})]}),Object(Q.jsxs)("label",{onClick:function(){return j("/VisitedPlaces")},children:[Object(Q.jsx)(_.a,{}),Object(Q.jsx)("span",{children:"My Places"})]}),Object(Q.jsxs)("label",{onClick:s,children:[Object(Q.jsx)(Z.a,{}),Object(Q.jsx)("span",{children:"Log out"})]})]})})]})}),Object(Q.jsxs)("div",{className:"header-nav",children:[Object(Q.jsx)("div",{className:"login-image",children:Object(Q.jsx)("img",{src:G,alt:"traveller.png"})}),Object(Q.jsx)("div",{className:"header-title",children:"AtTrackr"})]}),Object(Q.jsxs)("div",{className:"header-nav",children:[Object(Q.jsxs)(H.b,{className:c[0],to:"/AddLocation",children:[Object(Q.jsx)(q.a,{}),"Add New Place"]}),Object(Q.jsxs)(H.b,{className:c[1],to:"/VisitedPlaces",children:[Object(Q.jsx)(_.a,{}),"My Places"]}),Object(Q.jsxs)(H.b,{className:c[2],to:"/",children:[Object(Q.jsx)(K.a,{}),"My Profile"]}),Object(Q.jsxs)("div",{className:"header-button button-logout",onClick:s,children:[Object(Q.jsx)(Z.a,{}),"Log out"]})]})]})},X=s.a.forwardRef((function(e,t){return Object(Q.jsx)(E.a,Object(u.a)({direction:"up",ref:t},e))})),$=function(e){var t=e.user,n=e.setUser,s=Object(a.useState)(""),c=Object(r.a)(s,2),i=c[0],l=c[1],u=Object(a.useState)(""),b=Object(r.a)(u,2),m=b[0],h=b[1],O=Object(a.useState)(!0),p=Object(r.a)(O,2),v=p[0],x=p[1],N=Object(a.useState)(""),k=Object(r.a)(N,2),w=k[0],y=k[1],C=Object(a.useState)(!1),S=Object(r.a)(C,2),P=S[0],L=S[1],U=Object(a.useState)(""),E=Object(r.a)(U,2),T=E[0],H=E[1],J=Object(a.useState)({type:"",message:""}),q=Object(r.a)(J,2),R=q[0],_=q[1],Y=Object(a.useState)(!1),K=Object(r.a)(Y,2),B=K[0],Z=K[1];function F(){t&&(y(t.name),l(t.country),h(t.profilePic))}function z(){v?x(!v):(_({type:"",message:""}),L(!0))}function G(){return(G=Object(d.a)(o.a.mark((function e(a){var s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),!t){e.next=20;break}return s=t.username,e.prev=3,e.next=6,g({name:w,country:i,profilePic:m,username:s,passwordHash:T});case 6:return e.next=8,f({username:s,passwordHash:T});case 8:c=e.sent,n(c),window.localStorage.setItem("loggedUser",JSON.stringify(c)),_({type:"success",message:"User data updated successfully!"}),x(!v),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),console.log(e.t0),_({type:"error",message:"User data update failed"});case 19:H("");case 20:case"end":return e.stop()}}),e,null,[[3,15]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){F()}),[]),Object(Q.jsxs)("div",{className:"home-container",onClick:function(){B&&Z(!B)},children:[Object(Q.jsx)(W,{dropDownOpen:B,setDropDownOpen:Z,handleLogout:function(){n(null),window.localStorage.removeItem("loggedUser"),window.localStorage.removeItem("userVisits")},buttonClassnames:["header-button button-addPlace","header-button button-visits","header-button button-profile header-active"]}),Object(Q.jsxs)("div",{className:"profile-content",children:[Object(Q.jsx)("div",{className:"profile-picture",children:Object(Q.jsx)("img",{src:""===m?j:m,alt:"defaultProfilePic.png"})}),Object(Q.jsxs)("div",{className:"profile",children:[Object(Q.jsxs)("div",{className:"profile-header",children:[Object(Q.jsx)("div",{className:"profile-header-title",children:"User Profile"}),Object(Q.jsx)("div",{className:"profile-header-button",onClick:z,hidden:!v,children:"Edit profile"}),Object(Q.jsx)("div",{className:"profile-header-button",onClick:z,hidden:v,children:"Save changes"})]}),Object(Q.jsx)("div",{className:"profile-info profile-info-name",children:Object(Q.jsxs)("div",{className:"profile-info-container",children:[Object(Q.jsx)("div",{className:"title title-name",children:"NAME"}),Object(Q.jsx)("input",{className:"info-input info-input-name",type:"text",maxLength:20,disabled:v,value:w,onChange:function(e){var t=e.target;return y(t.value)}})]})}),Object(Q.jsx)("div",{className:"profile-info profile-info-country",children:Object(Q.jsxs)("div",{className:"profile-info-container",children:[Object(Q.jsx)("div",{className:"title title-country",children:"COUNTRY"}),Object(Q.jsx)("input",{className:"info-input info-input-country",type:"text",maxLength:30,disabled:v,value:i,onChange:function(e){var t=e.target;return l(t.value)}})]})}),Object(Q.jsx)("div",{className:"profile-info profile-info-username",children:Object(Q.jsxs)("div",{className:"profile-info-container",children:[Object(Q.jsx)("div",{className:"title title-username",children:"USERNAME"}),Object(Q.jsx)("input",{className:"info-input info-input-username",value:t?t.username:"",disabled:!0})]})}),Object(Q.jsx)("div",{className:"profile-info profile-info-picturelink",children:Object(Q.jsxs)("div",{className:"profile-info-container",children:[Object(Q.jsx)("div",{className:"title title-picturelink",hidden:v,children:"LINK TO PROFILE PICTURE"}),Object(Q.jsx)("input",{hidden:v,className:"info-input",type:"text",maxLength:100,value:m,disabled:v,onChange:function(e){var t=e.target;return h(t.value)}})]})})]}),Object(Q.jsx)("div",{className:"content-aligner"})]}),Object(Q.jsxs)(D.a,{open:P,TransitionComponent:X,keepMounted:!0,onClose:function(){return L(!1)},children:[Object(Q.jsx)(V.a,{children:Object(Q.jsx)("div",{children:Object(Q.jsx)("div",{children:"Confirm profile update with password"})})}),Object(Q.jsx)(A.a,{children:Object(Q.jsx)("form",{onSubmit:function(e){return G.apply(this,arguments)},children:Object(Q.jsxs)("div",{className:"dialog-form",children:[Object(Q.jsx)("input",{className:"info-input info-input-password",placeholder:"Password",value:T,onChange:function(e){var t=e.target;return H(t.value)},type:"password",required:!0}),Object(Q.jsx)("label",{className:"success"===R.type?"resultMessage message-success":"resultMessage message-error",children:R.message}),Object(Q.jsx)("button",{className:"login-form-submit",type:"submit",children:"Confirm"})]})})}),Object(Q.jsx)(I.a,{children:Object(Q.jsxs)("div",{className:"dialog-actions",children:[Object(Q.jsx)(M.a,{onClick:function(){F(),L(!1),x(!v)},children:"Cancel Changes"}),Object(Q.jsx)(M.a,{onClick:function(){return L(!1)},children:"Close"})]})})]})]})},ee=function(e){var t=e.setUser,n=Object(a.useState)(""),s=Object(r.a)(n,2),c=s[0],i=s[1],l=Object(a.useState)(""),u=Object(r.a)(l,2),j=u[0],b=u[1],m=Object(a.useState)(""),h=Object(r.a)(m,2),O=h[0],p=h[1];function v(){return(v=Object(d.a)(o.a.mark((function e(n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,f({username:c,passwordHash:j});case 4:a=e.sent,console.log(a),window.localStorage.setItem("loggedUser",JSON.stringify(a)),t(a),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),p("Username or password was incorrect.");case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}return Object(Q.jsxs)("div",{className:"login-container",children:[Object(Q.jsxs)("div",{className:"login-header",children:[Object(Q.jsx)("div",{className:"login-image",children:Object(Q.jsx)("img",{src:G,alt:"traveller.png"})}),Object(Q.jsx)("h1",{className:"header-title",children:"AtTrackr"}),Object(Q.jsx)("h3",{children:"Tracking your travels"})]}),Object(Q.jsxs)("div",{className:"login-content",children:[Object(Q.jsx)("div",{className:"description-content",children:Object(Q.jsxs)("div",{className:"desc-item desc-item-map",children:[Object(Q.jsx)("div",{children:"Keep track of places you have visited and plan your future travels"}),Object(Q.jsx)("div",{children:"Cities, Restaurants, Bars, Attractions - Save all your favourite places"})]})}),Object(Q.jsxs)("div",{className:"login",children:[Object(Q.jsx)("h1",{children:"Sign In"}),Object(Q.jsxs)("form",{className:"login-form",onSubmit:function(e){return v.apply(this,arguments)},children:[""===O?null:Object(Q.jsx)("p",{className:"errormessage",children:O}),Object(Q.jsx)("input",{className:"login-form-input",placeholder:"Username",value:c,onChange:function(e){var t=e.target;return i(t.value)},required:!0}),Object(Q.jsx)("input",{className:"login-form-input",placeholder:"Password",value:j,onChange:function(e){var t=e.target;return b(t.value)},type:"password",required:!0}),Object(Q.jsx)("button",{className:"login-form-submit",type:"submit",children:"Login"})]}),Object(Q.jsx)("div",{className:"login-links",children:Object(Q.jsx)(H.b,{className:"login-link",to:"/signUp",children:"Not a member yet?"})})]})]})]})},te=function(e){var t=e.user,n=e.setUser;return Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedUser");if(e){var t=JSON.parse(e);n(t)}}),[]),window.localStorage.getItem("loggedUser")&&t?Object(Q.jsx)($,{user:t,setUser:n}):Object(Q.jsx)(ee,{setUser:n})},ne=function(){var e=Object(a.useState)(""),t=Object(r.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(""),i=Object(r.a)(c,2),l=i[0],u=i[1],j=Object(a.useState)(""),b=Object(r.a)(j,2),m=b[0],h=b[1],O=Object(a.useState)(""),v=Object(r.a)(O,2),f=v[0],x=v[1],g=Object(a.useState)(!1),N=Object(r.a)(g,2),k=N[0],w=N[1];function y(){return(y=Object(d.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(l.length>5)){e.next=18;break}return e.prev=2,e.next=5,p({name:m,username:n,passwordHash:l});case 5:a=e.sent,console.log(a),s(""),u(""),h(""),w(!0),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),x("Account creation failed, username already in use");case 16:e.next=19;break;case 18:x("Account creation failed, password must contain at least 6 characters.");case 19:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}return Object(Q.jsxs)("div",{className:"login-container",children:[Object(Q.jsxs)("div",{className:"login-header",children:[Object(Q.jsx)("div",{className:"login-image",children:Object(Q.jsx)("img",{src:G,alt:"traveller.png"})}),Object(Q.jsx)("h1",{className:"header-title",children:"AtTrackr"}),Object(Q.jsx)("h3",{children:"Tracking your travels"})]}),Object(Q.jsx)("div",{className:"login-content",children:Object(Q.jsx)("div",{className:"login",children:k?Object(Q.jsxs)("div",{className:"signup-success",children:["Account creation successful!",Object(Q.jsx)("div",{children:Object(Q.jsx)(H.b,{className:"signup-success-link",to:"/",children:"Login"})})]}):Object(Q.jsxs)(Q.Fragment,{children:[Object(Q.jsx)("h1",{children:"Sign Up"}),Object(Q.jsxs)("form",{className:"login-form",onSubmit:function(e){return y.apply(this,arguments)},children:[""===f?null:Object(Q.jsx)("p",{className:"errormessage",children:f}),Object(Q.jsx)("input",{className:"login-form-input",placeholder:"Name (Optional)",value:m,onChange:function(e){var t=e.target;return h(t.value)}}),Object(Q.jsx)("input",{className:"login-form-input",placeholder:"Username",required:!0,value:n,onChange:function(e){var t=e.target;return s(t.value)}}),Object(Q.jsx)("input",{className:"login-form-input",placeholder:"Password",required:!0,type:"password",value:l,onChange:function(e){var t=e.target;return u(t.value)}}),Object(Q.jsx)("button",{className:"login-form-submit",children:"Create Account"})]}),Object(Q.jsx)(H.b,{className:"login-link",to:"/",children:"Already have an account?"})]})})})]})},ae=n(47),se=n(42),ce=n.n(se),ie=n(97),re=n.n(ie),le=function(e){var t=e.user,n=e.setUser,s=Object(T.f)(),c=Object(a.useState)(""),i=Object(r.a)(c,2),l=i[0],j=i[1],b=Object(a.useState)({lat:"",lon:""}),m=Object(r.a)(b,2),h=m[0],O=m[1],p=Object(a.useState)([{comment:""}]),v=Object(r.a)(p,2),f=v[0],x=v[1],g=Object(a.useState)(!1),N=Object(r.a)(g,2),w=N[0],y=N[1],C=Object(a.useState)({type:"",message:""}),S=Object(r.a)(C,2),P=S[0],L=S[1],U=Object(a.useState)(""),D=Object(r.a)(U,2),I=D[0],A=D[1],V=Object(a.useState)(""),E=Object(r.a)(V,2),M=E[0],H=E[1],J=Object(a.useState)(""),q=Object(r.a)(J,2),R=q[0],_=q[1],Y=Object(a.useState)(""),K=Object(r.a)(Y,2),B=K[0],Z=K[1],F=Object(a.useState)(!1),z=Object(r.a)(F,2),G=z[0],X=z[1],$=Object(a.useState)(!1),ee=Object(r.a)($,2),te=ee[0],ne=ee[1];function se(){return(se=Object(d.a)(o.a.mark((function e(n){var a,s,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),L({type:"",message:""}),!t){e.next=25;break}return a=t._id,s=(new Date).toLocaleString().split(" ",1).toString(),c=R.split(",").map((function(e){return{link:e}})).filter((function(e){return""!==e.link})),i=B.split(",").map((function(e){return{tag:e}})).filter((function(e){return""!==e.tag})),e.prev=7,e.next=10,k({userId:a,name:l,dateCreated:s,visited:w,comments:f,tags:i,category:I,pictureLink:c,coordinates:h});case 10:j(""),O({lat:"",lon:""}),x([{comment:""}]),A(""),Z(""),_(""),w&&y(!w),L({type:"success",message:"Visit Saved!"}),window.localStorage.removeItem("userVisits"),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(7),console.log(e.t0),L({type:"error",message:"Error, visit saving failed."});case 25:case"end":return e.stop()}}),e,null,[[7,21]])})))).apply(this,arguments)}function ie(e,t){("Enter"===e.key||t)&&(e.preventDefault(),A(M),H(""),ne(!1))}return Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedUser");if(e){var t=JSON.parse(e);n(t)}else s.push("/")}),[]),Object(Q.jsxs)("div",{className:"home-container",onClick:function(e){return function(e){G&&X(!G),te&&"input-dropdown"!==e.target.className&&ne(!te)}(e)},children:[Object(Q.jsx)(W,{dropDownOpen:G,setDropDownOpen:X,handleLogout:function(){window.localStorage.removeItem("loggedUser"),window.localStorage.removeItem("userVisits"),s.push("/")},buttonClassnames:["header-button button-addPlace header-active","header-button button-visits","header-button button-profile"]}),Object(Q.jsx)("div",{className:"addPlace-content",children:Object(Q.jsxs)("div",{className:"addPlace",children:[Object(Q.jsx)("div",{className:"profile-header",children:Object(Q.jsx)("div",{className:"profile-header-title",children:"Add new place"})}),Object(Q.jsxs)("form",{onSubmit:function(e){return se.apply(this,arguments)},children:[Object(Q.jsx)("div",{className:"addPlace-info addPlace-info-name",children:Object(Q.jsxs)("div",{className:"addPlace-info-container",children:[Object(Q.jsx)("div",{className:"title title-name",children:"Place name"}),Object(Q.jsx)("input",{className:"info-input info-input-name",type:"text",maxLength:70,required:!0,value:l,onChange:function(e){var t=e.target;return j(t.value)}})]})}),Object(Q.jsx)("div",{className:"addPlace-info addPlace-info-visitedcheck",children:Object(Q.jsxs)("div",{className:"addPlace-info-container addPlace-info-container-visitedcheck",children:[Object(Q.jsx)("div",{className:"title title-visitedcheck",children:"Visited"}),Object(Q.jsxs)("label",{className:"checkbox-container",children:[Object(Q.jsx)("input",{type:"checkbox"}),Object(Q.jsx)("span",{className:"checkmark",onClick:function(){return y(!w)}})]})]})}),Object(Q.jsxs)("div",{className:"addPlace-header",children:[Object(Q.jsx)("div",{className:"addPlace-header-title",children:"Coordinates:"}),Object(Q.jsx)("p",{children:"(enter coordinates manually or click a location from the map to get location coordinates.)"})]}),Object(Q.jsxs)("div",{className:"addPlace-info addPlace-info-coords",children:[Object(Q.jsxs)("div",{className:"addPlace-info-coords-inputs",children:[Object(Q.jsxs)("div",{className:"addPlace-info-container addPlace-info-container-lat",children:[Object(Q.jsx)("div",{className:"title title-lat",children:"Latitude: "}),Object(Q.jsx)("input",{className:"info-input info-input-lat",type:"number",max:90,min:-90,step:1e-15,required:!0,name:"lat",onChange:function(e){var t=e.target;return O(Object(u.a)(Object(u.a)({},h),{},{lat:t.value}))},value:h.lat})]}),Object(Q.jsxs)("div",{className:"addPlace-info-container addPlace-info-container-lon",children:[Object(Q.jsx)("div",{className:"title title-lon",children:"Longitude: "}),Object(Q.jsx)("input",{className:"info-input info-input-lon",type:"number",max:180,min:-180,step:1e-15,required:!0,name:"lon",onChange:function(e){var t=e.target;return O(Object(u.a)(Object(u.a)({},h),{},{lon:t.value}))},value:h.lon})]})]}),Object(Q.jsx)("div",{className:"map-container",children:Object(Q.jsx)(ae.a,{height:350,defaultCenter:[51.52375733610349,-.13264737754531097],defaultZoom:2,onClick:function(e){var t=e.latLng;return O({lat:t[0].toString(),lon:t[1].toString()})},children:Object(Q.jsx)(ae.b,{anchor:[Number(h.lat),Number(h.lon)],width:40,color:"green"})})})]}),Object(Q.jsx)("div",{className:"addPlace-info addPlace-info-visitedcheck",children:Object(Q.jsx)("div",{className:"addPlace-info-container addPlace-info-container-visitedcheck",children:Object(Q.jsxs)("div",{className:"dropdown",children:[Object(Q.jsxs)("div",{className:"title title-category-active",onClick:function(){return ne(!te)},children:[""!==I?I:"Category"," ",Object(Q.jsx)(ce.a,{})]}),Object(Q.jsxs)("div",{className:"dropdown-content",hidden:!te,children:[Object(Q.jsx)("label",{onClick:function(){return A("")},children:"None"}),Object(Q.jsx)("label",{onClick:function(){return A("Nature")},children:"Nature"}),Object(Q.jsx)("label",{onClick:function(){return A("Culture and Heritage")},children:"Culture and Heritage"}),Object(Q.jsx)("label",{onClick:function(){return A("Cities and districts")},children:"Cities and districts"}),Object(Q.jsxs)("div",{className:"custom-category",children:[Object(Q.jsx)("input",{type:"text",placeholder:"Custom",className:"input-dropdown",maxLength:30,onKeyDown:function(e){return ie(e,!1)},onChange:function(e){var t=e.target;return H(t.value)},value:M}),Object(Q.jsx)(re.a,{onClick:function(e){return ie(e,!0)}})]})]})]})})}),Object(Q.jsx)("div",{className:"addPlace-info addPlace-info-imagelinks",children:Object(Q.jsxs)("div",{className:"addPlace-info-container",children:[Object(Q.jsxs)("div",{className:"title title-links",children:[Object(Q.jsx)("label",{children:"Image Links"})," ",Object(Q.jsx)("p",{children:'(max 3 image links, separate links with ",")'})]}),Object(Q.jsx)("input",{className:"info-input info-input-name",type:"text",maxLength:350,value:R,onChange:function(e){var t=e.target;return _(t.value)}})]})}),Object(Q.jsx)("div",{className:"addPlace-info addPlace-info-comments",children:Object(Q.jsxs)("div",{className:"addPlace-info-container",children:[Object(Q.jsx)("div",{className:"title title-comments",children:"Comments"}),Object(Q.jsx)("textarea",{className:"info-input info-input-comments",maxLength:300,onChange:function(e){var t=e.target;return x([{comment:t.value}])},value:f[0].comment})]})}),Object(Q.jsx)("div",{className:"addPlace-info addPlace-info-tags",children:Object(Q.jsxs)("div",{className:"addPlace-info-container",children:[Object(Q.jsxs)("div",{className:"title title-links",children:[Object(Q.jsx)("label",{children:"Tags"})," ",Object(Q.jsx)("p",{children:'(separate tags with ",")'})]}),Object(Q.jsx)("input",{className:"info-input info-input-name",type:"text",maxLength:150,value:B,onChange:function(e){var t=e.target;return Z(t.value)}})]})}),Object(Q.jsx)("div",{className:"addPlace-info",children:Object(Q.jsxs)("div",{className:"addPlace-submit",children:[Object(Q.jsx)("button",{type:"submit",children:"Add to my places"}),Object(Q.jsx)("label",{className:"success"===P.type?"resultMessage message-success":"resultMessage message-error",children:P.message})]})})]})]})})]})},oe=n(98),de=n.n(oe),ue=n(99),je=n.n(ue),be=n(100),me=n.n(be),he=s.a.forwardRef((function(e,t){return Object(Q.jsx)(E.a,Object(u.a)({direction:"up",ref:t},e))})),Oe=function(e){var t,n,s,c=e.user,i=e.setUser,l=e.visits,j=e.setVisits,b={userId:"",_id:"",name:"",dateCreated:"",visited:!1,comments:[{_id:"",comment:""}],tags:[{tag:""}],category:"",pictureLink:[{link:""}],coordinates:{lat:"",lon:""}},m=Object(T.f)(),h=Object(a.useState)(!1),O=Object(r.a)(h,2),p=O[0],v=O[1],f=Object(a.useState)(!1),x=Object(r.a)(f,2),g=x[0],N=x[1],k=Object(a.useState)(b),w=Object(r.a)(k,2),C=w[0],P=w[1],U=Object(a.useState)(!0),E=Object(r.a)(U,2),H=E[0],J=E[1],q=Object(a.useState)(!1),R=Object(r.a)(q,2),_=R[0],Y=R[1],K=Object(a.useState)({type:"",message:""}),B=Object(r.a)(K,2),Z=B[0],F=B[1],z=Object(a.useState)(!1),G=Object(r.a)(z,2),X=G[0],$=G[1],ee=Object(a.useState)(""),te=Object(r.a)(ee,2),ne=te[0],se=te[1];function ie(){return re.apply(this,arguments)}function re(){return(re=Object(d.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=12;break}return e.prev=1,e.next=4,S(c._id);case 4:t=e.sent,window.localStorage.setItem("userVisits",JSON.stringify(t)),j(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function le(){return(le=Object(d.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=11;break}return e.prev=1,e.next=4,L(t);case 4:ie(),N(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function oe(e){if(l)switch(e){case 1:j(l.concat().sort((function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0})));break;case 2:j(l.concat().sort((function(e,t){return e.visited&&!t.visited?-1:!e.visited&&t.visited?1:0})));break;case 3:j(l.concat().sort((function(e,t){return e.category&&t.category&&e.category.toLowerCase()<t.category.toLowerCase()||e.category&&!t.category?-1:e.category&&t.category&&e.category.toLowerCase()>t.category.toLowerCase()||!e.category&&t.category?1:0})));break;case 4:j(l.concat().sort((function(e,t){return Number(new Date(e.dateCreated.split(".").reverse().join()))>Number(new Date(t.dateCreated.split(".").reverse().join()))?-1:Number(new Date(e.dateCreated.split(".").reverse().join()))<Number(new Date(t.dateCreated.split(".").reverse().join()))?1:0})))}}function ue(e,t){P(e),t.target&&"BUTTON"===t.target.tagName||v(!0)}function be(){v(!1),J(!0),P(b),F({type:"",message:""}),$(!1)}function Oe(){return pe.apply(this,arguments)}function pe(){return(pe=Object(d.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!H){e.next=4;break}J(!H),e.next=16;break;case 4:return e.prev=4,e.next=7,y(C);case 7:ie(),F({type:"success",message:"Visit updated successfully!"}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0),F({type:"error",message:"Visit update failed"});case 15:J(!H);case 16:case"end":return e.stop()}}),e,null,[[4,11]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedUser");if(e){var t=JSON.parse(e);i(t);var n=window.localStorage.getItem("userVisits");if(n){var a=JSON.parse(n);j(a)}else ie()}else m.push("/")}),[]),Object(Q.jsxs)("div",{className:"home-container",onClick:function(e){return function(e){_&&Y(!_),X&&"input-dropdown"!==e.target.className&&$(!X)}(e)},children:[Object(Q.jsx)(W,{dropDownOpen:_,setDropDownOpen:Y,handleLogout:function(){window.localStorage.removeItem("loggedUser"),window.localStorage.removeItem("userVisits"),m.push("/")},buttonClassnames:["header-button button-addPlace","header-button button-visits header-active","header-button button-profile"]}),Object(Q.jsxs)("div",{className:"visitlist-container",children:[Object(Q.jsx)("div",{className:"map-container",children:Object(Q.jsx)(ae.a,{defaultCenter:[51.52375733610349,-.13264737754531097],defaultZoom:2.8,minZoom:1.5,children:null===l||void 0===l?void 0:l.map((function(e){return Object(Q.jsx)(ae.b,{anchor:[Number(e.coordinates.lat),Number(e.coordinates.lon)],width:40,color:"green",onClick:function(t){return ue(e,t)}},e._id)}))})}),Object(Q.jsxs)("div",{className:"visitlist-header",children:[Object(Q.jsx)("div",{className:"visitlist-header-title",children:Object(Q.jsx)("label",{children:"Sort visits"})}),Object(Q.jsxs)("div",{className:"visitlist-header-content",children:[Object(Q.jsxs)("label",{onClick:function(){return oe(1)},children:["Name",Object(Q.jsx)(ce.a,{})]}),Object(Q.jsxs)("label",{onClick:function(){return oe(3)},children:["Category",Object(Q.jsx)(ce.a,{})]}),Object(Q.jsxs)("label",{onClick:function(){return oe(2)},children:["Visited",Object(Q.jsx)(ce.a,{})]}),Object(Q.jsxs)("label",{onClick:function(){return oe(4)},children:["Date Added",Object(Q.jsx)(ce.a,{})]})]})]}),Object(Q.jsx)("div",{className:"visitlist-grid",children:null===l||void 0===l?void 0:l.map((function(e){return Object(Q.jsxs)("div",{className:"visitlist-grid-item",onClick:function(t){return ue(e,t)},children:[Object(Q.jsxs)("div",{className:"grid-item grid-item-top",children:[Object(Q.jsxs)("div",{className:"grid-item-title",children:[Object(Q.jsx)("label",{className:"grid-item-title-name",children:e.name}),Object(Q.jsx)("label",{className:"grid-item-title-date",children:e.dateCreated})]}),Object(Q.jsx)("label",{className:"grid-item-category",children:e.category})]}),Object(Q.jsxs)("div",{className:"grid-item grid-item-bottom",children:[Object(Q.jsx)("div",{className:"grid-item-visited",children:e.visited?Object(Q.jsxs)("label",{className:"visited-true",children:[Object(Q.jsx)(de.a,{}),Object(Q.jsx)("span",{children:" Visited"})]}):Object(Q.jsxs)("label",{className:"visited-false",children:[Object(Q.jsx)(je.a,{}),Object(Q.jsx)("span",{children:" Not visited"})]})}),Object(Q.jsx)("button",{className:"visitlist-deletebutton",onClick:function(){return N(!0)},children:"Remove"})]})]})}))})]}),Object(Q.jsxs)(D.a,{open:p,TransitionComponent:he,keepMounted:!0,onClose:be,children:[Object(Q.jsxs)(V.a,{children:[Object(Q.jsxs)("div",{className:"visitdialog-title",children:[Object(Q.jsx)("div",{children:C.name}),H?Object(Q.jsxs)("div",{className:"visitdialog-title-button",onClick:Oe,children:[Object(Q.jsx)("span",{children:"Edit"}),Object(Q.jsx)(me.a,{})]}):Object(Q.jsx)("div",{className:"visitdialog-title-button",onClick:Oe,children:"Save changes"})]}),Object(Q.jsx)("div",{className:"visitdialog-visited",hidden:!H,children:C.visited?"You have visited this location":"You have not visited this location yet"}),Object(Q.jsx)("div",{className:"visitdialog-info visitdialog-info-visitedcheck",children:Object(Q.jsxs)("div",{className:"visitdialog-info-container visitdialog-info-container-visitedcheck",children:[Object(Q.jsx)("div",{className:"title title-visitedcheck",hidden:H,children:"Visited"}),Object(Q.jsxs)("label",{className:"checkbox-container",children:[Object(Q.jsx)("input",{type:"checkbox",checked:C.visited,readOnly:!0}),Object(Q.jsx)("span",{className:"checkmark",hidden:H,onClick:function(){return P(Object(u.a)(Object(u.a)({},C),{},{visited:!C.visited}))}})]})]})}),Object(Q.jsx)("label",{className:"success"===Z.type?"resultMessage message-success":"resultMessage message-error",children:Z.message})]}),Object(Q.jsx)(A.a,{children:Object(Q.jsxs)("div",{className:"visitdialog-content",children:[Object(Q.jsxs)("div",{className:"visitdialog-info visitdialog-info-coords",children:[Object(Q.jsxs)("div",{className:"visitdialog-info-container",children:[Object(Q.jsx)("div",{className:"title title-coords",children:"Latitude"}),Object(Q.jsx)("input",{className:"info-input",type:"text",maxLength:20,disabled:!0,value:C.coordinates.lat})]}),Object(Q.jsxs)("div",{className:"visitdialog-info-container",children:[Object(Q.jsx)("div",{className:"title title-coords",children:"Longitude"}),Object(Q.jsx)("input",{className:"info-input",type:"text",maxLength:20,disabled:!0,value:C.coordinates.lon})]})]}),Object(Q.jsx)("div",{className:"visitdialog-info visitdialog-info-category",children:Object(Q.jsxs)("div",{className:"visitdialog-info-container",children:[Object(Q.jsx)("div",{className:"title",children:"Category"}),Object(Q.jsxs)("div",{className:"dropdown",children:[Object(Q.jsxs)("div",{className:H?"title title-category":"title title-category-active",onClick:H?function(){return null}:function(){return $(!X)},children:[""!==C.category?C.category:"No category"," ",Object(Q.jsx)(ce.a,{})]}),Object(Q.jsxs)("div",{className:"dropdown-content",hidden:!X,children:[Object(Q.jsx)("label",{onClick:function(){return P(Object(u.a)(Object(u.a)({},C),{},{category:""}))},children:"None"}),Object(Q.jsx)("label",{onClick:function(){return P(Object(u.a)(Object(u.a)({},C),{},{category:"Nature"}))},children:"Nature"}),Object(Q.jsx)("label",{onClick:function(){return P(Object(u.a)(Object(u.a)({},C),{},{category:"Culture and Heritage"}))},children:"Culture and Heritage"}),Object(Q.jsx)("label",{onClick:function(){return P(Object(u.a)(Object(u.a)({},C),{},{category:"Cities and districts"}))},children:"Cities and districts"}),Object(Q.jsx)("input",{type:"text",placeholder:"Custom",className:"input-dropdown",maxLength:30,onKeyDown:function(e){return function(e){"Enter"===e.key&&(e.preventDefault(),P(Object(u.a)(Object(u.a)({},C),{},{category:ne})),se(""))}(e)},onChange:function(e){var t=e.target;return se(t.value)},value:ne})]})]})]})}),Object(Q.jsx)("div",{className:"visitdialog-info visitdialog-info-comments",children:Object(Q.jsxs)("div",{className:"visitdialog-info-container",children:[Object(Q.jsx)("div",{className:"title title-comments",children:"Comments"}),Object(Q.jsx)("textarea",{className:"info-input info-input-comments",disabled:H,value:null===(t=C.comments)||void 0===t?void 0:t.map((function(e){return e.comment})).join(),onChange:function(e){var t=e.target;return P(Object(u.a)(Object(u.a)({},C),{},{comments:[{comment:t.value}]}))}})]})}),Object(Q.jsx)("div",{className:"visitdialog-info visitdialog-info-tags",children:Object(Q.jsxs)("div",{className:"visitdialog-info-container",children:[Object(Q.jsx)("div",{className:"title title-tags",children:"Tags"}),Object(Q.jsx)("input",{className:"info-input info-input-tags",type:"text",maxLength:100,disabled:H,value:null===(n=C.tags)||void 0===n?void 0:n.map((function(e){return e.tag})).join(),onChange:function(e){var t=e.target;return P(Object(u.a)(Object(u.a)({},C),{},{tags:[{tag:t.value}]}))}})]})}),Object(Q.jsx)("div",{className:"visitdialog-info visitdialog-info-pics",children:Object(Q.jsxs)("div",{className:"visitdialog-info-container",children:[Object(Q.jsx)("div",{className:"title title-picturelink",children:"Images"}),C.pictureLink&&C.pictureLink.length>0&&H?C.pictureLink.map((function(e){return Object(Q.jsx)("img",{src:e.link,alt:"visit"},e.link)})):Object(Q.jsx)("input",{className:"info-input info-input-links",disabled:H,maxLength:350,value:null===(s=C.pictureLink)||void 0===s?void 0:s.map((function(e){return e.link})).join(),onChange:function(e){var t=e.target;return P(Object(u.a)(Object(u.a)({},C),{},{pictureLink:[{link:t.value}]}))}})]})})]})}),Object(Q.jsx)(I.a,{children:Object(Q.jsx)(M.a,{onClick:be,children:"Close"})})]}),Object(Q.jsxs)(D.a,{open:g,TransitionComponent:he,keepMounted:!0,onClose:function(){return N(!1)},children:[Object(Q.jsx)(V.a,{children:"Confirm visit deletion"}),Object(Q.jsxs)(A.a,{children:['Are you sure you want to remove "',C.name,'" from your visits?']}),Object(Q.jsxs)(I.a,{children:[Object(Q.jsx)(M.a,{onClick:function(){return function(e){return le.apply(this,arguments)}(C._id)},children:"Confirm"}),Object(Q.jsx)(M.a,{onClick:function(){return N(!1)},children:"Cancel"})]})]})]})};var pe=function(){var e=Object(a.useState)(null),t=Object(r.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(),i=Object(r.a)(c,2),l=i[0],o=i[1];return Object(Q.jsx)(H.a,{children:Object(Q.jsxs)(T.c,{children:[Object(Q.jsx)(T.a,{path:"/signUp",children:Object(Q.jsx)(ne,{})}),Object(Q.jsx)(T.a,{path:"/AddLocation",children:Object(Q.jsx)(le,{user:n,setUser:s})}),Object(Q.jsx)(T.a,{path:"/VisitedPlaces",children:Object(Q.jsx)(Oe,{user:n,setUser:s,visits:l,setVisits:o})}),Object(Q.jsx)(T.a,{path:"/",children:Object(Q.jsx)(te,{user:n,setUser:s})})]})})},ve=n(102),fe=Object(ve.a)({reducer:{}}),xe=n(101);i.a.render(Object(Q.jsx)(xe.a,{store:fe,children:Object(Q.jsx)(pe,{})}),document.getElementById("root"))},69:function(e,t,n){}},[[146,1,2]]]);
//# sourceMappingURL=main.3d9911e7.chunk.js.map