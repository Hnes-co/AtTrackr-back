(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{123:function(e,t,n){},148:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(36),c=n.n(i),r=n(24),l=(n(123),n(4)),o=(n(74),n(6)),d=n.n(o),u=n(9),j=n(15),b=n.p+"static/media/traveller-edited.6009f3b0.png",m=n(40),p=n.n(m),O="/api/users",h="/api/visits";function v(e){return f.apply(this,arguments)}function f(){return(f=Object(u.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post(O,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){return g.apply(this,arguments)}function g(){return(g=Object(u.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/users?username="+t.username+"&passwordHash="+t.passwordHash,e.next=3,p.a.get(n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return y.apply(this,arguments)}function y(){return(y=Object(u.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.put(O,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return w.apply(this,arguments)}function w(){return(w=Object(u.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post(h,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return S.apply(this,arguments)}function S(){return(S=Object(u.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/visits/"+t._id,e.next=3,p.a.put(n,t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return L.apply(this,arguments)}function L(){return(L=Object(u.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/visits?userId="+t,e.next=3,p.a.get(n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return D.apply(this,arguments)}function D(){return(D=Object(u.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/visits/"+t,e.next=3,p.a.delete(n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V=n(173),A=n(178),I=n(177),R=n(175),M=n(172),T=n(174),H=n(101),J=n.n(H),q=n(102),_=n.n(q),E=n(80),B=n.n(E),K=n(81),Y=n.n(K),Z=n(79),z=n.n(Z),F=n(82),G=n.n(F),Q=n(97),W=n.n(Q),X=n.p+"static/media/traveller.6d42be19.png",$=n(1),ee=function(e){var t=e.dropDownOpen,n=e.setDropDownOpen,a=e.setUser,s=e.buttonClassnames;function i(){window.localStorage.removeItem("loggedUser"),window.localStorage.removeItem("userVisits"),a(null)}return Object($.jsxs)("div",{className:"home-header",children:[Object($.jsx)("div",{className:"header-nav header-nav-dropdown",children:Object($.jsxs)("div",{className:"dropdown dropdown-nav",onClick:function(){return n(!t)},children:[Object($.jsx)(W.a,{}),Object($.jsx)("div",{className:"dropdown-aligner",hidden:!t,children:Object($.jsxs)("div",{className:"dropdown-content dropdown-content-nav",children:[Object($.jsxs)(r.b,{to:"/",children:[Object($.jsx)(z.a,{}),Object($.jsx)("span",{children:"My Profile"})]}),Object($.jsxs)(r.b,{to:"/AddLocation",children:[Object($.jsx)(B.a,{}),Object($.jsx)("span",{children:"Add new Place"})]}),Object($.jsxs)(r.b,{to:"/VisitedPlaces",children:[Object($.jsx)(Y.a,{}),Object($.jsx)("span",{children:"My Places"})]}),Object($.jsxs)("a",{href:"/",onClick:i,children:[Object($.jsx)(G.a,{}),Object($.jsx)("span",{children:"Log out"})]})]})})]})}),Object($.jsxs)("div",{className:"header-nav",children:[Object($.jsx)("div",{className:"login-image",children:Object($.jsx)("img",{src:X,alt:"traveller.png"})}),Object($.jsx)("div",{className:"header-title",children:"AtTrackr"})]}),Object($.jsxs)("div",{className:"header-nav",children:[Object($.jsxs)(r.b,{className:s[0],to:"/AddLocation",children:[Object($.jsx)(B.a,{}),"Add New Place"]}),Object($.jsxs)(r.b,{className:s[1],to:"/VisitedPlaces",children:[Object($.jsx)(Y.a,{}),"My Places"]}),Object($.jsxs)(r.b,{className:s[2],to:"/",children:[Object($.jsx)(z.a,{}),"My Profile"]}),Object($.jsxs)("a",{href:"/",className:"header-button button-logout",onClick:i,children:[Object($.jsx)(G.a,{}),"Log out"]})]})]})},te=s.a.forwardRef((function(e,t){return Object($.jsx)(M.a,Object(j.a)({direction:"up",ref:t},e))})),ne=function(e){var t=e.user,n=e.setUser,s=Object(a.useRef)(null),i=Object(a.useRef)(null),c=Object(a.useRef)(null),r=Object(a.useRef)(null),o=Object(a.useState)(!1),j=Object(l.a)(o,2),m=j[0],p=j[1],O=Object(a.useState)(!0),h=Object(l.a)(O,2),v=h[0],f=h[1],x=Object(a.useState)({type:"",message:""}),g=Object(l.a)(x,2),y=g[0],k=g[1],w=Object(a.useState)(!1),C=Object(l.a)(w,2),S=C[0],P=C[1];function L(){return(L=Object(u.a)(d.a.mark((function e(a){var l,o,u,j,b,m,O,h;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),j=t.username,b=null===(l=s.current)||void 0===l?void 0:l.value,m=null===(o=i.current)||void 0===o?void 0:o.value,O=null===(u=c.current)||void 0===u?void 0:u.value,!r.current){e.next=21;break}return e.prev=6,e.next=9,N({name:""===b?t.name:b,country:""===m?t.country:m,profilePic:""===O?t.profilePic:O,username:j,passwordHash:r.current.value});case 9:h=e.sent,n(h),window.localStorage.setItem("loggedUser",JSON.stringify(h)),p(!1),f(!v),r.current.value="",e.next=21;break;case 17:e.prev=17,e.t0=e.catch(6),console.log(e.t0),k({type:"error",message:"User data update failed"});case 21:case"end":return e.stop()}}),e,null,[[6,17]])})))).apply(this,arguments)}return Object($.jsxs)("div",{className:"home-container",onClick:S?function(){return P(!S)}:void 0,children:[Object($.jsx)(ee,{dropDownOpen:S,setDropDownOpen:P,setUser:n,buttonClassnames:["header-button button-addPlace","header-button button-visits","header-button button-profile header-active"]}),Object($.jsxs)("div",{className:"profile-content",children:[Object($.jsx)("div",{className:"profile-picture",children:Object($.jsx)("img",{src:""===t.profilePic?b:t.profilePic,alt:"defaultProfilePic.png"})}),Object($.jsxs)("div",{className:"profile",children:[Object($.jsxs)("div",{className:"profile-header",children:[Object($.jsx)("div",{className:"profile-header-title",children:"My Profile"}),Object($.jsx)("button",{title:v?"Edit profile":"Save changes",className:"profile-header-button",onClick:function(){v?f(!v):(k({type:"",message:""}),p(!0))},children:v?Object($.jsx)(J.a,{}):Object($.jsx)(_.a,{})})]}),Object($.jsx)("div",{className:"profile-info profile-info-name",children:Object($.jsxs)("div",{className:"profile-info-container",children:[Object($.jsx)("div",{className:"title title-name",children:t.name}),Object($.jsx)("input",{ref:s,className:"info-input info-input-name",type:"text",maxLength:20,hidden:v,placeholder:"New name"})]})}),Object($.jsx)("div",{className:"profile-info profile-info-country",children:Object($.jsxs)("div",{className:"profile-info-container",children:[Object($.jsx)("div",{className:"title title-country",children:t.country}),Object($.jsx)("input",{ref:i,className:"info-input info-input-country",type:"text",maxLength:30,hidden:v,placeholder:"New country"})]})}),Object($.jsx)("div",{className:"profile-info profile-info-picturelink",children:Object($.jsxs)("div",{className:"profile-info-container",children:[Object($.jsx)("div",{className:"title title-picturelink",hidden:v,children:"Link to profile picture"}),Object($.jsx)("input",{ref:c,hidden:v,className:"info-input",type:"text",maxLength:100})]})}),Object($.jsx)("div",{className:"profile-info profile-info-username",children:Object($.jsx)("div",{className:"profile-info-container",children:Object($.jsx)("div",{className:"title title-username",children:t.username})})})]}),Object($.jsx)("div",{className:"content-aligner"})]}),Object($.jsxs)(V.a,{open:m,TransitionComponent:te,keepMounted:!0,onClose:function(){return p(!1)},children:[Object($.jsx)(R.a,{children:Object($.jsx)("div",{children:"Confirm profile update with password"})}),Object($.jsxs)("form",{onSubmit:function(e){return L.apply(this,arguments)},children:[Object($.jsx)(I.a,{children:Object($.jsxs)("div",{className:"dialog-form",children:[Object($.jsx)("input",{ref:r,className:"info-input info-input-password",placeholder:"Password",type:"password",required:!0}),Object($.jsx)("label",{className:"message-"+y.type,children:y.message})]})}),Object($.jsx)(A.a,{children:Object($.jsxs)("div",{className:"dialog-actions",children:[Object($.jsx)(T.a,{type:"submit",children:"Confirm"}),Object($.jsx)(T.a,{onClick:function(){p(!1),f(!0)},children:"Cancel changes"})]})})]})]})]})},ae=function(e){var t=e.setUser,n=e.setVisits,s=Object(a.useRef)(null),i=Object(a.useRef)(null),c=Object(a.useState)(""),o=Object(l.a)(c,2),j=o[0],b=o[1];function m(){return(m=Object(u.a)(d.a.mark((function e(a){var c,r,l,o,u,j,m,p;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),u=null!==(c=null===(r=s.current)||void 0===r?void 0:r.value)&&void 0!==c?c:"",j=null!==(l=null===(o=i.current)||void 0===o?void 0:o.value)&&void 0!==l?l:"",e.prev=3,e.next=6,x({username:u,passwordHash:j});case 6:return m=e.sent,window.localStorage.setItem("loggedUser",JSON.stringify(m)),t(m),e.next=11,P(m._id);case 11:p=e.sent,window.localStorage.setItem("userVisits",JSON.stringify(p)),n(p),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),b("Username or password was incorrect.");case 19:case"end":return e.stop()}}),e,null,[[3,16]])})))).apply(this,arguments)}return Object($.jsxs)("div",{className:"login-container",children:[Object($.jsxs)("div",{className:"login-header",children:[Object($.jsx)("div",{className:"login-image",children:Object($.jsx)("img",{src:X,alt:"traveller.png"})}),Object($.jsx)("h1",{className:"header-title",children:"AtTrackr"}),Object($.jsx)("h3",{children:"Tracking your travels"})]}),Object($.jsxs)("div",{className:"login-content",children:[Object($.jsx)("div",{className:"description-content",children:Object($.jsxs)("div",{className:"desc-item desc-item-map",children:[Object($.jsx)("div",{children:"Keep track of places you have visited and plan your future travels"}),Object($.jsx)("div",{children:"Cities, Restaurants, Bars, Attractions - Save all your favourite places"})]})}),Object($.jsxs)("div",{className:"login",children:[Object($.jsx)("h1",{children:"Sign In"}),Object($.jsxs)("form",{className:"login-form",onSubmit:function(e){return m.apply(this,arguments)},children:[Object($.jsx)("label",{className:"message-error",children:j}),Object($.jsx)("input",{className:"login-form-input",placeholder:"Username",ref:s,required:!0}),Object($.jsx)("input",{className:"login-form-input",placeholder:"Password",ref:i,type:"password",required:!0}),Object($.jsx)("button",{className:"login-form-submit",type:"submit",children:"Login"})]}),Object($.jsx)("div",{className:"login-links",children:Object($.jsx)(r.b,{className:"login-link",to:"/signUp",children:"Sign Up"})})]})]})]})},se=function(e){var t=e.user,n=e.setUser,a=e.setVisits;return t?Object($.jsx)(ne,{user:t,setUser:n}):Object($.jsx)(ae,{setUser:n,setVisits:a})},ie=function(){var e=Object(a.useRef)(null),t=Object(a.useRef)(null),n=Object(a.useRef)(null),s=Object(a.useState)({type:"",message:""}),i=Object(l.a)(s,2),c=i[0],o=i[1];function j(){return(j=Object(u.a)(d.a.mark((function a(s){var i,c,r,l,u,j,b,m;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s.preventDefault(),a.prev=1,j=null===(i=n.current)||void 0===i?void 0:i.value,b=null!==(c=null===(r=e.current)||void 0===r?void 0:r.value)&&void 0!==c?c:"",m=null!==(l=null===(u=t.current)||void 0===u?void 0:u.value)&&void 0!==l?l:"",a.next=7,v({name:j,username:b,passwordHash:m});case 7:o({type:"success",message:"Account creation successfull! You can now login."}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),o({type:"error",message:"Account creation failed, username already in use"});case 13:case"end":return a.stop()}}),a,null,[[1,10]])})))).apply(this,arguments)}return Object($.jsxs)("div",{className:"login-container",children:[Object($.jsxs)("div",{className:"login-header",children:[Object($.jsx)("div",{className:"login-image",children:Object($.jsx)("img",{src:X,alt:"traveller.png"})}),Object($.jsx)("h1",{className:"header-title",children:"AtTrackr"}),Object($.jsx)("h3",{children:"Tracking your travels"})]}),Object($.jsx)("div",{className:"login-content",children:Object($.jsxs)("div",{className:"login",children:[Object($.jsx)("h1",{children:"Sign Up"}),Object($.jsxs)("form",{className:"login-form",onSubmit:function(e){return j.apply(this,arguments)},children:[Object($.jsx)("div",{className:"message-"+c.type,children:c.message}),Object($.jsx)("input",{ref:n,className:"login-form-input",placeholder:"Name (Optional)"}),Object($.jsx)("input",{ref:e,className:"login-form-input",placeholder:"Username",required:!0,minLength:3}),Object($.jsx)("input",{ref:t,className:"login-form-input",placeholder:"Password",required:!0,minLength:6,type:"password"}),Object($.jsx)("button",{type:"submit",className:"login-form-submit",children:"Create Account"})]}),Object($.jsx)(r.b,{className:"login-link",to:"/",children:"Already have an account?"})]})})]})},ce=n(48),re=n(39),le=n.n(re),oe=n(69),de=n.n(oe),ue=function(e){var t=e.user,n=e.setUser,s=e.visits,i=e.setVisits,c=Object(a.useState)(""),r=Object(l.a)(c,2),o=r[0],b=r[1],m=Object(a.useState)({lat:"",lon:""}),p=Object(l.a)(m,2),O=p[0],h=p[1],v=Object(a.useState)([{comment:""}]),f=Object(l.a)(v,2),x=f[0],g=f[1],N=Object(a.useState)(!1),y=Object(l.a)(N,2),w=y[0],C=y[1],S=Object(a.useState)({type:"",message:""}),P=Object(l.a)(S,2),L=P[0],U=P[1],D=Object(a.useState)(""),V=Object(l.a)(D,2),A=V[0],I=V[1],R=Object(a.useState)(""),M=Object(l.a)(R,2),T=M[0],H=M[1],J=Object(a.useState)(""),q=Object(l.a)(J,2),_=q[0],E=q[1],B=Object(a.useState)(""),K=Object(l.a)(B,2),Y=K[0],Z=K[1],z=Object(a.useState)(!1),F=Object(l.a)(z,2),G=F[0],Q=F[1],W=Object(a.useState)(!1),X=Object(l.a)(W,2),te=X[0],ne=X[1];function ae(){return(ae=Object(u.a)(d.a.mark((function e(n){var a,c,r,l,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),U({type:"",message:""}),!t){e.next=27;break}return a=t._id,c=(new Date).toLocaleString().split(" ",1).toString(),r=_.split(",").map((function(e){return{link:e}})).filter((function(e){return""!==e.link})),l=Y.split(",").map((function(e){return{tag:e}})).filter((function(e){return""!==e.tag})),e.prev=7,e.next=10,k({userId:a,name:o,dateCreated:c,visited:w,comments:x,tags:l,category:A,pictureLink:r,coordinates:O});case 10:u=e.sent,b(""),h({lat:"",lon:""}),g([{comment:""}]),I(""),Z(""),E(""),w&&C(!w),i(s?function(e){return null===e||void 0===e?void 0:e.concat([u])}:[u]),window.localStorage.setItem("userVisits",JSON.stringify(s)),U({type:"success",message:"Visit Saved!"}),e.next=27;break;case 23:e.prev=23,e.t0=e.catch(7),console.log(e.t0),U({type:"error",message:"Error, visit saving failed."});case 27:case"end":return e.stop()}}),e,null,[[7,23]])})))).apply(this,arguments)}function se(){I(T),H(""),ne(!1)}return Object($.jsxs)("div",{className:"home-container",onClick:function(e){return function(e){G&&Q(!G),te&&"input-dropdown"!==e.target.className&&ne(!te)}(e)},children:[Object($.jsx)(ee,{dropDownOpen:G,setDropDownOpen:Q,setUser:n,buttonClassnames:["header-button button-addPlace header-active","header-button button-visits","header-button button-profile"]}),Object($.jsx)("div",{className:"addPlace-content",children:Object($.jsxs)("div",{className:"addPlace",children:[Object($.jsx)("div",{className:"profile-header",children:Object($.jsx)("div",{className:"profile-header-title",children:"Add new place"})}),Object($.jsxs)("form",{onSubmit:function(e){return ae.apply(this,arguments)},children:[Object($.jsx)("div",{className:"addPlace-info addPlace-info-name",children:Object($.jsxs)("div",{className:"addPlace-info-container",children:[Object($.jsx)("div",{className:"title title-name",children:"Place name"}),Object($.jsx)("input",{className:"info-input info-input-name",type:"text",maxLength:70,required:!0,value:o,onChange:function(e){var t=e.target;return b(t.value)}})]})}),Object($.jsx)("div",{className:"addPlace-info addPlace-info-visitedcheck",children:Object($.jsxs)("div",{className:"addPlace-info-container addPlace-info-container-visitedcheck",children:[Object($.jsx)("div",{className:"title title-visitedcheck",children:"Visited"}),Object($.jsxs)("label",{className:"checkbox-container",children:[Object($.jsx)("input",{type:"checkbox"}),Object($.jsx)("span",{className:"checkmark",onClick:function(){return C(!w)}})]})]})}),Object($.jsxs)("div",{className:"addPlace-header",children:[Object($.jsx)("div",{className:"addPlace-header-title",children:"Coordinates:"}),Object($.jsx)("p",{children:"(enter coordinates manually or click a location from the map to get location coordinates.)"})]}),Object($.jsxs)("div",{className:"addPlace-info addPlace-info-coords",children:[Object($.jsxs)("div",{className:"addPlace-info-coords-inputs",children:[Object($.jsxs)("div",{className:"addPlace-info-container addPlace-info-container-lat",children:[Object($.jsx)("div",{className:"title title-lat",children:"Latitude: "}),Object($.jsx)("input",{className:"info-input info-input-lat",type:"number",max:90,min:-90,step:1e-15,required:!0,name:"lat",onChange:function(e){var t=e.target;return h(Object(j.a)(Object(j.a)({},O),{},{lat:t.value}))},value:O.lat})]}),Object($.jsxs)("div",{className:"addPlace-info-container addPlace-info-container-lon",children:[Object($.jsx)("div",{className:"title title-lon",children:"Longitude: "}),Object($.jsx)("input",{className:"info-input info-input-lon",type:"number",max:180,min:-180,step:1e-15,required:!0,name:"lon",onChange:function(e){var t=e.target;return h(Object(j.a)(Object(j.a)({},O),{},{lon:t.value}))},value:O.lon})]})]}),Object($.jsx)("div",{className:"map-container",children:Object($.jsx)(ce.a,{height:350,defaultCenter:[51.52375733610349,-.13264737754531097],defaultZoom:2,onClick:function(e){var t=e.latLng;return h({lat:t[0].toString(),lon:t[1].toString()})},children:Object($.jsx)(ce.b,{anchor:[Number(O.lat),Number(O.lon)],width:40,color:"green"})})})]}),Object($.jsx)("div",{className:"addPlace-info addPlace-info-visitedcheck",children:Object($.jsx)("div",{className:"addPlace-info-container addPlace-info-container-visitedcheck",children:Object($.jsxs)("div",{className:"dropdown",children:[Object($.jsxs)("div",{className:"title title-category-active",onClick:function(){return ne(!te)},children:[""!==A?A:"Category"," ",Object($.jsx)(le.a,{})]}),Object($.jsxs)("div",{className:"dropdown-content",hidden:!te,children:[Object($.jsx)("label",{onClick:function(){return I("")},children:"None"}),Object($.jsx)("label",{onClick:function(){return I("Nature")},children:"Nature"}),Object($.jsx)("label",{onClick:function(){return I("Culture and Heritage")},children:"Culture and Heritage"}),Object($.jsx)("label",{onClick:function(){return I("Cities and districts")},children:"Cities and districts"}),Object($.jsxs)("div",{className:"custom-category",children:[Object($.jsx)("input",{type:"text",placeholder:"Custom",className:"input-dropdown",maxLength:30,onKeyDown:function(e){return"Enter"===e.key?se():null},onChange:function(e){var t=e.target;return H(t.value)},value:T}),Object($.jsx)(de.a,{onClick:se})]})]})]})})}),Object($.jsx)("div",{className:"addPlace-info addPlace-info-imagelinks",children:Object($.jsxs)("div",{className:"addPlace-info-container",children:[Object($.jsxs)("div",{className:"title title-links",children:[Object($.jsx)("label",{children:"Image Links"})," ",Object($.jsx)("p",{children:'(max 3 image links, separate links with ",")'})]}),Object($.jsx)("input",{className:"info-input info-input-name",type:"text",maxLength:350,value:_,onChange:function(e){var t=e.target;return E(t.value)}})]})}),Object($.jsx)("div",{className:"addPlace-info addPlace-info-comments",children:Object($.jsxs)("div",{className:"addPlace-info-container",children:[Object($.jsx)("div",{className:"title title-comments",children:"Comments"}),Object($.jsx)("textarea",{className:"info-input info-input-comments",maxLength:300,onChange:function(e){var t=e.target;return g([{comment:t.value}])},value:x[0].comment})]})}),Object($.jsx)("div",{className:"addPlace-info addPlace-info-tags",children:Object($.jsxs)("div",{className:"addPlace-info-container",children:[Object($.jsxs)("div",{className:"title title-links",children:[Object($.jsx)("label",{children:"Tags"})," ",Object($.jsx)("p",{children:'(separate tags with ",")'})]}),Object($.jsx)("input",{className:"info-input info-input-name",type:"text",maxLength:150,value:Y,onChange:function(e){var t=e.target;return Z(t.value)}})]})}),Object($.jsx)("div",{className:"addPlace-info",children:Object($.jsxs)("div",{className:"addPlace-submit",children:[Object($.jsx)("button",{type:"submit",children:"Add to my places"}),Object($.jsx)("label",{className:"success"===L.type?"resultMessage message-success":"resultMessage message-error",children:L.message})]})})]})]})})]})},je=n(103),be=n.n(je),me=n(104),pe=n.n(me),Oe=n(105),he=n.n(Oe),ve=s.a.forwardRef((function(e,t){return Object($.jsx)(M.a,Object(j.a)({direction:"up",ref:t},e))})),fe=function(e){var t,n,s,i=e.user,c=e.setUser,r=e.visits,o=e.setVisits,b={userId:"",_id:"",name:"",dateCreated:"",visited:!1,comments:[{_id:"",comment:""}],tags:[{tag:""}],category:"",pictureLink:[{link:""}],coordinates:{lat:"",lon:""}},m=Object(a.useState)(!1),p=Object(l.a)(m,2),O=p[0],h=p[1],v=Object(a.useState)(!1),f=Object(l.a)(v,2),x=f[0],g=f[1],N=Object(a.useState)(b),y=Object(l.a)(N,2),k=y[0],w=y[1],S=Object(a.useState)(!0),L=Object(l.a)(S,2),D=L[0],M=L[1],H=Object(a.useState)(!1),J=Object(l.a)(H,2),q=J[0],_=J[1],E=Object(a.useState)({type:"",message:""}),B=Object(l.a)(E,2),K=B[0],Y=B[1],Z=Object(a.useState)(!1),z=Object(l.a)(Z,2),F=z[0],G=z[1],Q=Object(a.useState)(""),W=Object(l.a)(Q,2),X=W[0],te=W[1];function ne(){return ae.apply(this,arguments)}function ae(){return(ae=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=12;break}return e.prev=1,e.next=4,P(i._id);case 4:t=e.sent,window.localStorage.setItem("userVisits",JSON.stringify(t)),o(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function se(){return(se=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=11;break}return e.prev=1,e.next=4,U(t);case 4:ne(),g(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function ie(e){if(r)switch(e){case 1:o(r.concat().sort((function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:e.name.toLowerCase()>t.name.toLowerCase()?1:0})));break;case 2:o(r.concat().sort((function(e,t){return e.visited&&!t.visited?-1:!e.visited&&t.visited?1:0})));break;case 3:o(r.concat().sort((function(e,t){return e.category&&t.category&&e.category.toLowerCase()<t.category.toLowerCase()||e.category&&!t.category?-1:e.category&&t.category&&e.category.toLowerCase()>t.category.toLowerCase()||!e.category&&t.category?1:0})));break;case 4:o(r.concat().sort((function(e,t){return Number(new Date(e.dateCreated.split(".").reverse().join()))>Number(new Date(t.dateCreated.split(".").reverse().join()))?-1:Number(new Date(e.dateCreated.split(".").reverse().join()))<Number(new Date(t.dateCreated.split(".").reverse().join()))?1:0})))}}function re(e,t){w(e),t.target&&"BUTTON"===t.target.tagName||h(!0)}function oe(){h(!1),M(!0),w(b),Y({type:"",message:""}),G(!1)}function ue(){return je.apply(this,arguments)}function je(){return(je=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!D){e.next=4;break}M(!D),e.next=16;break;case 4:return e.prev=4,e.next=7,C(k);case 7:ne(),Y({type:"success",message:"Visit updated successfully!"}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0),Y({type:"error",message:"Visit update failed"});case 15:M(!D);case 16:case"end":return e.stop()}}),e,null,[[4,11]])})))).apply(this,arguments)}function me(){w(Object(j.a)(Object(j.a)({},k),{},{category:X})),te("")}return Object($.jsxs)("div",{className:"home-container",onClick:function(e){return function(e){q&&_(!q),F&&"input-dropdown"!==e.target.className&&G(!F)}(e)},children:[Object($.jsx)(ee,{dropDownOpen:q,setDropDownOpen:_,setUser:c,buttonClassnames:["header-button button-addPlace","header-button button-visits header-active","header-button button-profile"]}),Object($.jsxs)("div",{className:"visitlist-container",children:[Object($.jsx)("div",{className:"map-container",children:Object($.jsx)(ce.a,{defaultCenter:[51.52375733610349,-.13264737754531097],defaultZoom:2.8,minZoom:1.5,children:null===r||void 0===r?void 0:r.map((function(e){return Object($.jsx)(ce.b,{anchor:[Number(e.coordinates.lat),Number(e.coordinates.lon)],width:40,color:"green",onClick:function(t){return re(e,t)}},e._id)}))})}),Object($.jsx)("div",{className:"visitlist-header",children:Object($.jsxs)("div",{className:"visitlist-header-content",children:[Object($.jsxs)("button",{onClick:function(){return ie(1)},children:["Name",Object($.jsx)(le.a,{})]}),Object($.jsxs)("button",{onClick:function(){return ie(3)},children:["Category",Object($.jsx)(le.a,{})]}),Object($.jsxs)("button",{onClick:function(){return ie(2)},children:["Visited",Object($.jsx)(le.a,{})]}),Object($.jsxs)("button",{onClick:function(){return ie(4)},children:["Date Added",Object($.jsx)(le.a,{})]})]})}),Object($.jsx)("div",{className:"visitlist-grid",children:null===r||void 0===r?void 0:r.map((function(e,t){return Object($.jsxs)("div",{className:"visitlist-grid-item",onClick:function(t){return re(e,t)},children:[Object($.jsxs)("div",{className:"grid-item grid-item-top",children:[Object($.jsxs)("div",{className:"grid-item-title",children:[Object($.jsx)("label",{className:"grid-item-title-name",children:e.name}),Object($.jsx)("label",{className:"grid-item-title-date",children:e.dateCreated})]}),Object($.jsx)("label",{className:"grid-item-category",children:e.category})]}),Object($.jsxs)("div",{className:"grid-item grid-item-bottom",children:[Object($.jsx)("div",{className:"grid-item-visited",children:e.visited?Object($.jsxs)("label",{className:"visited-true",children:[Object($.jsx)(be.a,{}),Object($.jsx)("span",{children:" Visited"})]}):Object($.jsxs)("label",{className:"visited-false",children:[Object($.jsx)(pe.a,{}),Object($.jsx)("span",{children:" Not visited"})]})}),Object($.jsx)("button",{className:"visitlist-deletebutton",onClick:function(){return g(!0)},children:"Remove"})]})]},t)}))})]}),Object($.jsxs)(V.a,{open:O,TransitionComponent:ve,keepMounted:!0,onClose:oe,children:[Object($.jsxs)(R.a,{children:[Object($.jsxs)("div",{className:"visitdialog-title",children:[Object($.jsx)("div",{children:k.name}),D?Object($.jsx)("button",{title:"Edit visit",className:"visitdialog-title-button",onClick:ue,children:Object($.jsx)(he.a,{})}):Object($.jsx)("button",{className:"visitdialog-title-button",onClick:ue,children:"Save changes"})]}),Object($.jsx)("div",{className:"visitdialog-visited",hidden:!D,children:k.visited?"You have visited this location":"You have not visited this location yet"}),Object($.jsx)("div",{className:"visitdialog-info visitdialog-info-visitedcheck",children:Object($.jsxs)("div",{className:"visitdialog-info-container visitdialog-info-container-visitedcheck",children:[Object($.jsx)("div",{className:"title title-visitedcheck",hidden:D,children:"Visited"}),Object($.jsxs)("label",{className:"checkbox-container",children:[Object($.jsx)("input",{type:"checkbox",checked:k.visited,readOnly:!0}),Object($.jsx)("span",{className:"checkmark",hidden:D,onClick:function(){return w(Object(j.a)(Object(j.a)({},k),{},{visited:!k.visited}))}})]})]})}),Object($.jsx)("label",{className:"success"===K.type?"resultMessage message-success":"resultMessage message-error",children:K.message})]}),Object($.jsx)(I.a,{children:Object($.jsxs)("div",{className:"visitdialog-content",children:[Object($.jsxs)("div",{className:"visitdialog-info visitdialog-info-coords",children:[Object($.jsxs)("div",{className:"visitdialog-info-container",children:[Object($.jsx)("div",{className:"title title-coords",children:"Latitude"}),Object($.jsx)("input",{className:"info-input",type:"text",maxLength:20,disabled:!0,value:k.coordinates.lat})]}),Object($.jsxs)("div",{className:"visitdialog-info-container",children:[Object($.jsx)("div",{className:"title title-coords",children:"Longitude"}),Object($.jsx)("input",{className:"info-input",type:"text",maxLength:20,disabled:!0,value:k.coordinates.lon})]})]}),Object($.jsx)("div",{className:"visitdialog-info visitdialog-info-category",children:Object($.jsx)("div",{className:"visitdialog-info-container",children:Object($.jsxs)("div",{className:"dropdown",children:[Object($.jsxs)("div",{className:D?"title title-category":"title title-category-active",onClick:D?function(){return null}:function(){return G(!F)},children:[""!==k.category?k.category:"No category"," ",Object($.jsx)(le.a,{})]}),Object($.jsxs)("div",{className:"dropdown-content",hidden:!F,children:[Object($.jsx)("label",{onClick:function(){return w(Object(j.a)(Object(j.a)({},k),{},{category:""}))},children:"None"}),Object($.jsx)("label",{onClick:function(){return w(Object(j.a)(Object(j.a)({},k),{},{category:"Nature"}))},children:"Nature"}),Object($.jsx)("label",{onClick:function(){return w(Object(j.a)(Object(j.a)({},k),{},{category:"Culture and Heritage"}))},children:"Culture and Heritage"}),Object($.jsx)("label",{onClick:function(){return w(Object(j.a)(Object(j.a)({},k),{},{category:"Cities and districts"}))},children:"Cities and districts"}),Object($.jsxs)("div",{className:"custom-category",children:[Object($.jsx)("input",{type:"text",placeholder:"Custom",className:"input-dropdown",maxLength:30,onKeyDown:function(e){return"Enter"===e.key?me():null},onChange:function(e){var t=e.target;return te(t.value)},value:X}),Object($.jsx)(de.a,{onClick:me})]})]})]})})}),Object($.jsx)("div",{className:"visitdialog-info visitdialog-info-comments",children:Object($.jsxs)("div",{className:"visitdialog-info-container",children:[Object($.jsx)("div",{className:"title title-comments",children:"Comments"}),Object($.jsx)("textarea",{className:"info-input info-input-comments",disabled:D,value:null===(t=k.comments)||void 0===t?void 0:t.map((function(e){return e.comment})).join(),onChange:function(e){var t=e.target;return w(Object(j.a)(Object(j.a)({},k),{},{comments:[{comment:t.value}]}))}})]})}),Object($.jsx)("div",{className:"visitdialog-info visitdialog-info-tags",children:Object($.jsxs)("div",{className:"visitdialog-info-container",children:[Object($.jsx)("div",{className:"title title-tags",children:"Tags"}),Object($.jsx)("input",{className:"info-input info-input-tags",type:"text",maxLength:100,disabled:D,value:null===(n=k.tags)||void 0===n?void 0:n.map((function(e){return e.tag})).join(),onChange:function(e){var t=e.target;return w(Object(j.a)(Object(j.a)({},k),{},{tags:[{tag:t.value}]}))}})]})}),Object($.jsx)("div",{className:"visitdialog-info visitdialog-info-pics",children:Object($.jsxs)("div",{className:"visitdialog-info-container",children:[Object($.jsx)("div",{className:"title title-picturelink",children:"Images"}),k.pictureLink&&k.pictureLink.length>0&&D?k.pictureLink.map((function(e){return Object($.jsx)("img",{src:e.link,alt:"visit"},e.link)})):Object($.jsx)("input",{className:"info-input info-input-links",disabled:D,maxLength:350,value:null===(s=k.pictureLink)||void 0===s?void 0:s.map((function(e){return e.link})).join(),onChange:function(e){var t=e.target;return w(Object(j.a)(Object(j.a)({},k),{},{pictureLink:[{link:t.value}]}))}})]})})]})}),Object($.jsx)(A.a,{children:Object($.jsx)(T.a,{onClick:oe,children:"Close"})})]}),Object($.jsxs)(V.a,{open:x,TransitionComponent:ve,keepMounted:!0,onClose:function(){return g(!1)},children:[Object($.jsx)(R.a,{children:"Confirm visit deletion"}),Object($.jsxs)(I.a,{children:['Are you sure you want to remove "',k.name,'" from your visits?']}),Object($.jsxs)(A.a,{children:[Object($.jsx)(T.a,{onClick:function(){return function(e){return se.apply(this,arguments)}(k._id)},children:"Confirm"}),Object($.jsx)(T.a,{onClick:function(){return g(!1)},children:"Cancel"})]})]})]})},xe=n(7);var ge=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],s=t[1],i=Object(a.useState)(),c=Object(l.a)(i,2),r=c[0],o=c[1],d=Object(xe.l)(),u=Object(xe.j)();return Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedUser"),t=window.localStorage.getItem("userVisits");e||"/"===u.pathname||"/signUp"===u.pathname?!n&&e?s(JSON.parse(e)):!r&&t&&o(JSON.parse(t)):d("/")}),[n,d,u.pathname,r]),Object($.jsxs)(xe.c,{children:[Object($.jsx)(xe.a,{path:"/signUp",element:Object($.jsx)(ie,{})}),Object($.jsx)(xe.a,{path:"/AddLocation",element:Object($.jsx)(ue,{user:n,setUser:s,visits:r,setVisits:o})}),Object($.jsx)(xe.a,{path:"/VisitedPlaces",element:Object($.jsx)(fe,{user:n,setUser:s,visits:r,setVisits:o})}),Object($.jsx)(xe.a,{path:"/",element:Object($.jsx)(se,{user:n,setUser:s,setVisits:o})})]})};c.a.render(Object($.jsx)(r.a,{children:Object($.jsx)(ge,{})}),document.getElementById("root"))},74:function(e,t,n){}},[[148,1,2]]]);
//# sourceMappingURL=main.e1b4e8fd.chunk.js.map